// translations.js (ÙŠÙ…ÙƒÙ† ÙØµÙ„ Ù‡Ø°Ø§ Ø¥Ù„Ù‰ Ù…Ù„Ù Ù…Ù†ÙØµÙ„ Ù„Ù„ØªØ±Ø¬Ù…Ø§Øª)
const translations = new Map([
  ['en', {
    heroTitle: "Welcome to <span class='highlight'>BitLine</span>",
    aboutTitle: "About IT",
    aboutText: "The IT department is the backbone of any modern organization, focusing on networking, programming, databases, and cybersecurity â€” preparing professionals for the digital future.",
    downloadsTitle: "Downloads",
    contactTitle: "Contact Us",
    aboutMeTitle: "About the Developer",
    footerText: "All rights reserved Â© BitLine â€” Designed by Eslam Elbana",
    typingTexts: [
      "Welcome to BitLine â€” The Future of IT Excellence ğŸ’»",
      "Explore programs, drivers, and complete media tools.",
      "Discover the world of Information Technology with us ğŸš€"
    ]
  }],
  ['ar', {
    heroTitle: "Ù‚Ø³Ù… <span class='highlight'>ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</span>",
    aboutTitle: "Ù…Ø§ Ù‡Ùˆ Ù‚Ø³Ù… Ø§Ù„Ù€ ITØŸ",
    aboutText: "Ù‚Ø³Ù… ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù‡Ùˆ Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„Ù†Ø§Ø¨Ø¶ Ù„Ø£ÙŠ Ù…Ø¤Ø³Ø³Ø© Ø¹ØµØ±ÙŠØ©. ÙŠØ®ØªØµ Ø¨Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø´Ø¨ÙƒØ§ØªØŒ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙˆØ§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ. ÙŠÙ‡Ø¯Ù Ø§Ù„Ù‚Ø³Ù… Ø¥Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯ ÙƒÙˆØ§Ø¯Ø± Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø­Ø¯ÙŠØ«Ø© ÙˆØªØ·ÙˆÙŠØ± Ø­Ù„ÙˆÙ„ Ø°ÙƒÙŠØ© Ù„Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©.",
    downloadsTitle: "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬",
    contactTitle: "ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§",
    aboutMeTitle: "Ø¹Ù† Ø§Ù„Ù…ØµÙ…Ù…",
    footerText: "Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ù„Ù…ÙˆÙ‚Ø¹ BitLine â€” ØªØµÙ…ÙŠÙ…: Ø¥Ø³Ù„Ø§Ù… Ø§Ù„Ø¨Ù†Ø§",
    typingTexts: [
      "Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ BitLine â€” Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„ØªÙ…ÙŠØ² ÙÙŠ ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ğŸ’»",
      "Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ØŒ Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†ØŒ ÙˆØ£Ø¯ÙˆØ§Øª Ø§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„ÙƒØ§Ù…Ù„Ø©.",
      "Ø§ÙƒØªØ´Ù Ø¹Ø§Ù„Ù… ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¹Ù†Ø§ ğŸš€"
    ]
  }]
]);

// typing.js (ÙŠÙ…ÙƒÙ† ÙØµÙ„ Ù‡Ø°Ø§ Ø¥Ù„Ù‰ Ù…Ù„Ù Ù…Ù†ÙØµÙ„ Ù„Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ØªØ­Ø±Ùƒ)
class TypingEffect {
  constructor(elementId, texts, speed = 80, deleteSpeed = 40, pause = 1500) {
    this.element = document.getElementById(elementId);
    if (!this.element) throw new Error(`Element with ID '${elementId}' not found.`);
    this.texts = texts;
    this.speed = speed;
    this.deleteSpeed = deleteSpeed;
    this.pause = pause;
    this.textIndex = 0;
    this.charIndex = 0;
    this.isDeleting = false;
    this.isRunning = false;
  }

  start() {
    if (this.isRunning) return;
    this.isRunning = true;
    this.type();
  }

  stop() {
    this.isRunning = false;
  }

  updateTexts(newTexts) {
    this.texts = newTexts;
    this.reset();
    this.start();
  }

  reset() {
    this.textIndex = 0;
    this.charIndex = 0;
    this.isDeleting = false;
  }

  type() {
    if (!this.isRunning) return;

    const currentText = this.texts[this.textIndex];
    this.element.textContent = currentText.substring(0, this.charIndex);

    if (!this.isDeleting && this.charIndex < currentText.length) {
      this.charIndex++;
      requestAnimationFrame(() => setTimeout(() => this.type(), this.speed));
    } else if (this.isDeleting && this.charIndex > 0) {
      this.charIndex--;
      requestAnimationFrame(() => setTimeout(() => this.type(), this.deleteSpeed));
    } else {
      this.isDeleting = !this.isDeleting;
      if (!this.isDeleting) this.textIndex = (this.textIndex + 1) % this.texts.length;
      setTimeout(() => this.type(), this.pause);
    }
  }
}

// language.js (ÙŠÙ…ÙƒÙ† ÙØµÙ„ Ù‡Ø°Ø§ Ø¥Ù„Ù‰ Ù…Ù„Ù Ù…Ù†ÙØµÙ„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„ØºØ§Øª)
class LanguageManager {
  constructor(langBtnId, defaultLang = 'en') {
    this.langBtn = document.getElementById(langBtnId);
    if (!this.langBtn) throw new Error(`Language button with ID '${langBtnId}' not found.`);
    this.currentLang = defaultLang;
    this.selectors = {
      heroTitle: ".hero-text h1",
      aboutTitle: ".about h2",
      aboutText: ".about p",
      downloadsTitle: ".downloads h2",
      contactTitle: ".contact h2",
      aboutMeTitle: ".aboutme h2",
      footerText: "footer p"
    };
    this.typingEffect = null; // Ø³ÙŠØªÙ… Ø±Ø¨Ø·Ù‡ Ù„Ø§Ø­Ù‚Ù‹Ø§
    this.init();
  }

  init() {
    this.langBtn.addEventListener('click', () => this.toggleLanguage());
    this.updateUI();
  }

  setTypingEffect(typingEffect) {
    this.typingEffect = typingEffect;
  }

  toggleLanguage() {
    this.currentLang = this.currentLang === 'en' ? 'ar' : 'en';
    this.updateUI();
    if (this.typingEffect) {
      this.typingEffect.updateTexts(translations.get(this.currentLang).typingTexts);
    }
  }

  updateUI() {
    const trans = translations.get(this.currentLang);
    if (!trans) return;

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ
    Object.keys(this.selectors).forEach(key => {
      const element = document.querySelector(this.selectors[key]);
      if (element) {
        if (key === 'heroTitle') {
          element.innerHTML = trans[key];
        } else {
          element.textContent = trans[key];
        }
      }
    });

    // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„Ù„ØºØ© ÙˆØ§ØªØ¬Ø§Ù‡ Ø§Ù„ØµÙØ­Ø©
    this.langBtn.textContent = this.currentLang === 'en' ? 'AR' : 'EN';
    document.body.style.direction = this.currentLang === 'ar' ? 'rtl' : 'ltr';
  }
}

// main.js (Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ - ÙŠÙ…ÙƒÙ† ÙˆØ¶Ø¹ Ù‡Ø°Ø§ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© HTML Ø£Ùˆ Ù…Ù„Ù Ù…Ù†ÙØµÙ„)
document.addEventListener("DOMContentLoaded", () => {
  try {
    // Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
    const typingEffect = new TypingEffect("typing-text", translations.get('en').typingTexts);
    typingEffect.start();

    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¯ÙŠØ± Ø§Ù„Ù„ØºØ§Øª
    const langManager = new LanguageManager("lang-btn");
    langManager.setTypingEffect(typingEffect);

    // ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‡ÙŠØ¯Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
    const header = document.querySelector("header");
    if (header) {
      window.addEventListener("scroll", () => {
        header.classList.toggle("scrolled", window.scrollY > 50);
      });
    }
  } catch (error) {
    console.error("Error initializing BitLine website:", error);
  }
});
